import{r as e,o as a,a as t,b as o,c as l,d as n,e as u,w as r,F as p,f as s,i as c}from"./vendor.a450da70.js";s({setup(s){const c=e([]),d=e(1),m=e(10),i=e("");async function v({companies:e,serverName:a,townName:t,updatedAt:o}){const l=[];for(let n of e)for(let e of n.products)l.push({updatedAt:o,serverName:a,townName:t,companyName:n.company_name,productName:e.name,productAmount:e.amount,productUnitPrice:e.unit_price});return l}function f(e,a,t,o){return(new Intl.NumberFormat).format(Number(t))}function b(e){console.log(e),d.value=e}return a((async function(){const{data:e}=await t.get("data/stats.json");let a=[];for(let o in e){const l=e[o];for(let e in l){if(0===l[e])continue;const{data:n}=await t.get(`data/${o}-${e}.json`),{companies:u,updated_at:r}=n;a=a.concat(await v({companies:u,serverName:o,townName:e,updatedAt:r}))}}console.log(a),c.value=a})),(e,a)=>{const t=o("el-input"),s=o("el-table-column"),v=o("el-table"),N=o("el-pagination");return l(),n(p,null,[u(t,{modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=e=>i.value=e),size:"mini",placeholder:"商品關鍵字"},null,8,["modelValue"]),u(v,{"row-key":"date",data:c.value.slice((d.value-1)*m.value,d.value*m.value),style:{width:"100%"}},{default:r((()=>[u(s,{prop:"updatedAt",label:"更新日期",sortable:"",width:"180","column-key":"date"}),u(s,{prop:"serverName",label:"伺服器",width:"180",filters:[{text:"護衛艦(推薦)",value:"護衛艦(推薦)"},{text:"探索號(推薦)",value:"探索號(推薦)"},{text:"幽靈船",value:"幽靈船"},{text:"戰列艦",value:"戰列艦"}]},null,8,["filters"]),u(s,{prop:"townName",label:"港口"}),u(s,{prop:"companyName",label:"商會"}),u(s,{prop:"productName",label:"商品"}),u(s,{prop:"productAmount",label:"數量"}),u(s,{prop:"productUnitPrice",label:"價格",formatter:f})])),_:1},8,["data"]),u(N,{background:"",layout:"prev, pager, next",total:c.value.length,"page-size":m.value,onCurrentChange:b},null,8,["total","page-size"])],64)}}}).use(c).mount("#app");
