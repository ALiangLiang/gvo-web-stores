import{r as e,o as a,a as t,b as o,c as l,d as n,e as r,w as u,F as s,f as p,i as c}from"./vendor.a450da70.js";p({setup(p){const c=e([]),d=e(1),i=e(10);async function m({companies:e,serverName:a,townName:t,updatedAt:o}){const l=[];for(let n of e)for(let e of n.products)l.push({updatedAt:o,serverName:a,townName:t,companyName:n.company_name,productName:e.name,productAmount:e.amount,productUnitPrice:e.unit_price});return l}function f(e,a,t){return a[t.serverName]===e}function v(e,a,t,o){return(new Intl.NumberFormat).format(Number(t))}function b(e){console.log(e),d.value=e}return a((async function(){const{data:e}=await t.get("data/stats.json");let a=[];for(let o in e){const l=e[o];for(let e in l){if(0===l[e])continue;const{data:n}=await t.get(`data/${o}-${e}.json`),{companies:r,updated_at:u}=n;a=a.concat(await m({companies:r,serverName:o,townName:e,updatedAt:u}))}}console.log(a),c.value=a})),(e,a)=>{const t=o("el-input"),p=o("el-table-column"),m=o("el-table"),N=o("el-pagination");return l(),n(s,null,[r(t,{modelValue:e.search,"onUpdate:modelValue":a[1]||(a[1]=a=>e.search=a),size:"mini",placeholder:"商品關鍵字"},null,8,["modelValue"]),r(m,{"row-key":"date",ref:filterTable,data:c.value.slice((d.value-1)*i.value,d.value*i.value),style:{width:"100%"}},{default:u((()=>[r(p,{prop:"updatedAt",label:"更新日期",sortable:"",width:"180","column-key":"date"}),r(p,{prop:"serverName",label:"伺服器",width:"180",filters:[{text:"護衛艦",value:"護衛艦(推薦)"},{text:"探索號",value:"探索號(推薦)"},{text:"幽靈船",value:"幽靈船"},{text:"戰列艦",value:"戰列艦"}],"filter-method":f},null,8,["filters"]),r(p,{prop:"townName",label:"港口"}),r(p,{prop:"companyName",label:"商會"}),r(p,{prop:"productName",label:"商品"}),r(p,{prop:"productAmount",label:"數量"}),r(p,{prop:"productUnitPrice",label:"價格",formatter:v})])),_:1},8,["data"]),r(N,{background:"",layout:"prev, pager, next",total:c.value.length,"page-size":i.value,onCurrentChange:b},null,8,["total","page-size"])],64)}}}).use(c).mount("#app");
